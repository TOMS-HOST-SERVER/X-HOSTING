<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>SK™ 30S Hack PRO AI_V15 - MMT LOGIC</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
    body, html {
        margin: 0; padding: 0; height: 100%; overflow: hidden; 
        font-family: 'Segoe UI', sans-serif;
        background: #000; color: white;
        touch-action: none;
    }

    iframe { width: 100%; height: 100%; border: none; }

    #predictionBox {
        position: fixed; bottom: 50px; right: 15px;
        background: rgba(0, 0, 0, 0.98); 
        padding: 12px 8px; 
        border-radius: 12px; 
        width: 155px; 
        text-align: center;
        z-index: 99999; cursor: grab; backdrop-filter: blur(15px);
        border: 2px solid #ff0055;
        box-shadow: 0 0 20px rgba(255, 0, 85, 0.6);
        touch-action: none;
    }

    .animated-title {
        font-size: 9px; font-weight: 900; margin-bottom: 8px;
        letter-spacing: 0.8px; animation: rgTitle 1.5s infinite alternate;
    }

    @keyframes rgTitle {
        0% { color: #ff3d3d; text-shadow: 0 0 8px #ff3d3d; }
        100% { color: #00ff88; text-shadow: 0 0 8px #00ff88; }
    }

    #predictionUI { display: flex; flex-direction: column; gap: 8px; }

    .login-img {
        width: 32px; height: 32px; border-radius: 50%;
        border: 1.5px solid #facc15; margin: 2px auto;
        display: block; object-fit: cover;
    }

    #passwordInput {
        width: 80%; padding: 4px; border-radius: 5px;
        background: #000; color: #fff; margin-bottom: 6px; 
        font-size: 9px; text-align: center;
        border: 1.2px solid #ff3d3d;
        animation: redPulse 1s infinite alternate;
    }

    @keyframes redPulse {
        from { box-shadow: 0 0 2px #ff3d3d; }
        to { box-shadow: 0 0 8px #ff3d3d; }
    }

    #loginBtn {
        padding: 5px 15px; border-radius: 4px; border: none;
        background: #facc15; font-weight: bold; cursor: pointer; font-size: 9px;
        text-transform: uppercase; box-shadow: 0 0 5px #facc15;
    }

    .combined-signal-box {
        display: flex; justify-content: space-around; align-items: center;
        border: 1.2px solid rgba(255, 255, 255, 0.15);
        border-radius: 8px; padding: 6px; background: rgba(255, 255, 255, 0.05);
        min-height: 40px;
    }

    .result-text { font-size: 18px; font-weight: 900; letter-spacing: 1px; }

    .period-num { 
        font-size: 10px; color: #facc15; font-weight: bold; 
        border: 1px solid rgba(250, 204, 21, 0.5); 
        padding: 2px 5px; border-radius: 4px;
    }

    .timer { 
        font-size: 9px; color: #fff; background: #111; 
        padding: 2px 5px; border-radius: 4px; border: 1px solid #444; 
    }

    .tg-container {
        display: flex; align-items: center; justify-content: center;
        margin-top: 8px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 8px;
    }
    .tg-btn {
        text-decoration: none; color: #0088cc; font-size: 11px; 
        font-weight: bold; display: flex; align-items: center; gap: 4px;
    }

    .big { color: #00ff88; text-shadow: 0 0 10px #00ff88; }
    .small { color: #ff3d3d; text-shadow: 0 0 10px #ff3d3d; }
    .wait { color: #888; animation: blink 1s infinite; font-size: 14px; }
    .win { color: #00ff88; animation: zoom 0.5s infinite alternate; }
    .loss { color: #ff3d3d; }

    @keyframes blink { 50% { opacity: 0.3; } }
    @keyframes zoom { from { transform: scale(1); } to { transform: scale(1.1); } }
</style>
</head>
<body>

<iframe src="https://tkclub2.com/#/register?invitationCode=44544219903"></iframe>

<div id="predictionBox">
    <div class="animated-title">SK™ 30S Hack PRO AI_V15</div>

    <div id="loginForm">
        <img src="https://i.postimg.cc/fbNGNBsp/In-Shot-20260125-163547531.jpg" class="login-img">
        <input type="password" id="passwordInput" placeholder="Password">
        <br>
        <button id="loginBtn">LOGIN</button>
    </div>

    <div id="predictionUI" style="display:none;">
        <img src="https://i.postimg.cc/fbNGNBsp/In-Shot-20260125-163547531.jpg" class="login-img">
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin: 4px 0;">
            <div id="period" class="period-num">ID: ----</div>
            <div id="timer" class="timer">TIME: 00:30</div>
        </div>
        
        <div class="combined-signal-box">
            <div id="bsText" class="result-text wait">--</div>
            <div id="statusText" style="font-size: 10px; font-weight: bold; color: #888;">READY</div>
        </div>
    </div>

    <div class="tg-container">
        <a href="https://t.me/skmehedi54" target="_blank" class="tg-btn">
            <i class="fab fa-telegram"></i>
            <span>Telegram</span>
        </a>
    </div>
</div>

<script>
// --- LOGIC INTEGRATION ---
let myPrediction = "";
let isShowingResult = false;

function getPeriod() {
    const now = new Date();
    const yyyy = now.getFullYear(), mm = String(now.getMonth() + 1).padStart(2, '0'), dd = String(now.getDate()).padStart(2, '0');
    let serial = (now.getHours() * 60 + now.getMinutes()) * 2 + (now.getSeconds() >= 30 ? 2 : 1);
    return `${yyyy}${mm}${dd}30${serial}`; 
}

async function fetchResult() {
    try { 
        const res = await fetch(`https://mastermindteam.top/api/tkclub/wingo_30sec_history.json?ts=${Date.now()}`); 
        const data = await res.json(); 
        return data.data.list[0]; 
    } catch (e) { return null; }
}

function generateNewPrediction() {
    const sigEl = document.getElementById('bsText');
    const statusEl = document.getElementById('statusText');
    myPrediction = (Math.random() > 0.5) ? "BIG" : "SMALL";
    sigEl.innerText = myPrediction;
    sigEl.className = "result-text " + myPrediction.toLowerCase();
    statusEl.innerText = "ANALYZED";
    statusEl.style.color = "#facc15";
    isShowingResult = false;
}

async function startEngine() {
    // Immediate Signal on Login
    generateNewPrediction();

    setInterval(async () => {
        const now = new Date();
        const remain = 30 - (now.getSeconds() % 30);
        
        document.getElementById('timer').innerText = `TIME: 00:${String(remain).padStart(2, '0')}`;
        document.getElementById('period').innerText = "ID: " + getPeriod().slice(-4);

        const sigEl = document.getElementById('bsText');
        const statusEl = document.getElementById('statusText');

        // Logic: At 28s remaining, process previous result
        if (remain === 28 && !isShowingResult) { 
            const latest = await fetchResult();
            if (latest && myPrediction !== "") {
                const serverRes = parseInt(latest.number) >= 5 ? "BIG" : "SMALL";
                isShowingResult = true;
                const isWin = myPrediction === serverRes;
                
                // Show WIN/LOSS
                sigEl.innerText = isWin ? "WIN" : "LOSS";
                sigEl.className = "result-text " + (isWin ? "win" : "loss");
                statusEl.innerText = isWin ? "SUCCESS" : "FAILED";
                
                // Transition to next signal after 3 seconds exactly
                setTimeout(() => {
                    generateNewPrediction();
                }, 3000);
            }
        }

        // Logic: Show WAIT during the last 3 seconds of the period
        if (remain <= 3 && !isShowingResult) { 
            sigEl.innerText = "WAIT"; 
            sigEl.className = "result-text wait"; 
            statusEl.innerText = "WAITING...";
        }
    }, 1000);
}

document.getElementById("loginBtn").addEventListener("click", () => {
    if(document.getElementById("passwordInput").value === "skvip") { 
        document.getElementById("loginForm").style.display = "none";
        document.getElementById("predictionUI").style.display = "block";
        startEngine(); // Engine starts and generates first signal instantly
    } else { alert("WRONG PASSWORD!"); }
});

// --- DRAGGING SYSTEM ---
const box = document.getElementById("predictionBox");
let isDragging = false, offset = [0,0];
const start = (e) => { 
    isDragging = true; 
    let c = e.clientX || (e.touches ? e.touches[0].clientX : 0); 
    let y = e.clientY || (e.touches ? e.touches[0].clientY : 0); 
    offset = [box.offsetLeft - c, box.offsetTop - y]; 
};
const move = (e) => { 
    if (!isDragging) return; 
    let c = (e.clientX || (e.touches ? e.touches[0].clientX : 0)); 
    let y = (e.clientY || (e.touches ? e.touches[0].clientY : 0)); 
    box.style.left = (c + offset[0]) + 'px'; 
    box.style.top = (y + offset[1]) + 'px'; 
    box.style.bottom = 'auto'; box.style.right = 'auto'; 
};
box.addEventListener('mousedown', start); box.addEventListener('touchstart', start);
document.addEventListener('mousemove', move); document.addEventListener('touchmove', move);
document.addEventListener('mouseup', () => isDragging = false); document.addEventListener('touchend', () => isDragging = false);
</script>

</body>
</html>
